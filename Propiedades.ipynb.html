<html>
<head>
<title>Propiedades.ipynb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #cf8e6d;}
.s2 { color: #bcbec4;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Propiedades.ipynb</font>
</center></td></tr></table>
<pre><span class="s0">#%% 
</span><span class="s1">import </span><span class="s2">pandas </span><span class="s1">as </span><span class="s2">pd</span>
<span class="s1">import </span><span class="s2">numpy </span><span class="s1">as </span><span class="s2">np</span>
<span class="s1">import </span><span class="s2">seaborn </span><span class="s1">as </span><span class="s2">sns</span>
<span class="s1">import </span><span class="s2">matplotlib</span><span class="s3">.</span><span class="s2">pyplot </span><span class="s1">as </span><span class="s2">plt</span>
<span class="s1">from </span><span class="s2">sklearn</span><span class="s3">.</span><span class="s2">model_selection </span><span class="s1">import </span><span class="s2">train_test_split</span>
<span class="s1">from </span><span class="s2">sklearn</span><span class="s3">.</span><span class="s2">linear_model </span><span class="s1">import </span><span class="s2">LinearRegression</span>
<span class="s1">from </span><span class="s2">sklearn</span><span class="s3">.</span><span class="s2">metrics </span><span class="s1">import </span><span class="s2">mean_squared_error</span><span class="s3">, </span><span class="s2">r2_score</span>

<span class="s0">#%% md 
</span><span class="s2">Importacion de los CSV 
</span><span class="s0">#%% 
</span><span class="s2">csv1 </span><span class="s3">= </span><span class="s2">pd</span><span class="s3">.</span><span class="s2">read_csv</span><span class="s3">(</span><span class="s4">&quot;C:/Users/Bryan/Documents/Portafolio/Propiedades-RM/2023-07-18 Propiedades Web Scrape.csv&quot;</span><span class="s3">)</span>
<span class="s2">csv2 </span><span class="s3">= </span><span class="s2">pd</span><span class="s3">.</span><span class="s2">read_csv</span><span class="s3">(</span><span class="s4">&quot;C:/Users/Bryan/Documents/Portafolio/Propiedades-RM/2023-03-08 Precios Casas RM.csv&quot;</span><span class="s3">)</span>
<span class="s0">#%% md 
</span><span class="s2">Realizamos una union de los CSV, uniendo solo los datos que no estan en el otro CSV, luego eliminamos los duplicados 
</span><span class="s0">#%% 
</span><span class="s2">csvun </span><span class="s3">= </span><span class="s2">csv2</span><span class="s3">[~</span><span class="s2">csv2</span><span class="s3">[</span><span class="s4">&quot;id&quot;</span><span class="s3">].</span><span class="s2">isin</span><span class="s3">(</span><span class="s2">csv1</span><span class="s3">[</span><span class="s4">'id'</span><span class="s3">])]</span>
<span class="s2">unioncsv </span><span class="s3">= </span><span class="s2">pd</span><span class="s3">.</span><span class="s2">concat</span><span class="s3">([</span><span class="s2">csv1</span><span class="s3">, </span><span class="s2">csvun</span><span class="s3">], </span><span class="s2">ignore_index</span><span class="s3">=</span><span class="s1">True</span><span class="s3">)</span>
<span class="s2">unioncsv</span><span class="s3">.</span><span class="s2">info</span><span class="s3">()</span>
<span class="s0">#%% 
</span><span class="s2">df1 </span><span class="s3">= </span><span class="s2">unioncsv</span><span class="s3">.</span><span class="s2">drop_duplicates</span><span class="s3">(</span><span class="s2">subset</span><span class="s3">=[</span><span class="s4">&quot;id&quot;</span><span class="s3">], </span><span class="s2">keep</span><span class="s3">=</span><span class="s4">&quot;first&quot;</span><span class="s3">)</span>
<span class="s2">df1</span><span class="s3">.</span><span class="s2">info</span><span class="s3">()</span>
<span class="s0">#%% md 
</span><span class="s2">Eliminamos los datos que corresponden a arriendos u otros datos erroneos, luego limpiamos las filas que no contienen &quot;Total Area&quot; y &quot;Built Area&quot; 
</span><span class="s0">#%% 
</span><span class="s2">dfu </span><span class="s3">= </span><span class="s2">df1</span><span class="s3">[</span><span class="s2">df1</span><span class="s3">[</span><span class="s4">&quot;Price_USD&quot;</span><span class="s3">] &gt;= </span><span class="s5">100</span><span class="s3">]</span>
<span class="s0">#%% 
</span><span class="s2">dfx </span><span class="s3">= </span><span class="s2">dfu</span><span class="s3">.</span><span class="s2">dropna</span><span class="s3">(</span><span class="s2">subset</span><span class="s3">=[</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Built Area&quot;</span><span class="s3">], </span><span class="s2">axis</span><span class="s3">=</span><span class="s5">0</span><span class="s3">)</span>
<span class="s2">dfx</span><span class="s3">.</span><span class="s2">info</span><span class="s3">()</span>
<span class="s0">#%% md 
</span><span class="s2">Con los datos actuales podemos obtener: 
1- Valor medio, moda y mediana de las propiedades 
2- Inmobiliarias o corredoras con mayor publicaciones 
3- Comunas con mayor y menor numero de publicaciones 
4- Valor promedio de una propiedad en X comuna 
5- Mapa de calor entre las variables 
</span><span class="s0">#%% md 
</span><span class="s2">Valor medio, moda y mediana de las propiedades 
</span><span class="s0">#%% 
</span><span class="s2">print</span><span class="s3">(</span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Price_CLP&quot;</span><span class="s3">].</span><span class="s2">mean</span><span class="s3">().</span><span class="s2">astype</span><span class="s3">(</span><span class="s2">int</span><span class="s3">))</span>
<span class="s2">print</span><span class="s3">(</span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Price_CLP&quot;</span><span class="s3">].</span><span class="s2">median</span><span class="s3">().</span><span class="s2">astype</span><span class="s3">(</span><span class="s2">int</span><span class="s3">))</span>
<span class="s2">print</span><span class="s3">(</span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Price_CLP&quot;</span><span class="s3">].</span><span class="s2">mode</span><span class="s3">().</span><span class="s2">astype</span><span class="s3">(</span><span class="s2">int</span><span class="s3">))</span>
<span class="s0">#%% md 
</span><span class="s2">Realizamos un escaneo general de los datos: 
</span><span class="s0">#%% 
</span><span class="s2">dfa </span><span class="s3">= </span><span class="s2">dfx</span><span class="s3">.</span><span class="s2">groupby</span><span class="s3">(</span><span class="s4">&quot;Comuna&quot;</span><span class="s3">)[</span><span class="s4">&quot;id&quot;</span><span class="s3">].</span><span class="s2">nunique</span><span class="s3">()</span>
<span class="s2">dfa</span><span class="s3">.</span><span class="s2">nlargest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">dfa</span><span class="s3">.</span><span class="s2">nsmallest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">dfd </span><span class="s3">= </span><span class="s2">dfx</span><span class="s3">.</span><span class="s2">groupby</span><span class="s3">(</span><span class="s4">&quot;Realtor&quot;</span><span class="s3">)[</span><span class="s4">&quot;id&quot;</span><span class="s3">].</span><span class="s2">nunique</span><span class="s3">()</span>
<span class="s2">dfd</span><span class="s3">.</span><span class="s2">nlargest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">dfx</span><span class="s3">[[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">, </span><span class="s4">&quot;Dorms&quot;</span><span class="s3">, </span><span class="s4">&quot;Baths&quot;</span><span class="s3">, </span><span class="s4">&quot;Built Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Parking&quot;</span><span class="s3">]].</span><span class="s2">corr</span><span class="s3">().</span><span class="s2">round</span><span class="s3">(</span><span class="s5">2</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">dfx</span><span class="s3">[[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">, </span><span class="s4">&quot;Dorms&quot;</span><span class="s3">, </span><span class="s4">&quot;Baths&quot;</span><span class="s3">, </span><span class="s4">&quot;Built Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Parking&quot;</span><span class="s3">]].</span><span class="s2">cov</span><span class="s3">().</span><span class="s2">round</span><span class="s3">(</span><span class="s5">2</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">dfp </span><span class="s3">= </span><span class="s2">dfx</span><span class="s3">.</span><span class="s2">groupby</span><span class="s3">(</span><span class="s4">&quot;Comuna&quot;</span><span class="s3">)[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">].</span><span class="s2">mean</span><span class="s3">().</span><span class="s2">astype</span><span class="s3">(</span><span class="s2">int</span><span class="s3">)</span>
<span class="s2">dfp</span><span class="s3">.</span><span class="s2">nlargest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">)</span>
<span class="s0">#%% md 
</span><span class="s2">Inmobiliarias o corredoras con mayor publicaciones 
</span><span class="s0">#%% 
</span><span class="s2">sns</span><span class="s3">.</span><span class="s2">set</span><span class="s3">(</span><span class="s2">font_scale</span><span class="s3">=</span><span class="s5">0.5</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">, </span><span class="s2">axs </span><span class="s3">= </span><span class="s2">plt</span><span class="s3">.</span><span class="s2">subplots</span><span class="s3">(</span><span class="s2">nrows</span><span class="s3">=</span><span class="s5">1</span><span class="s3">, </span><span class="s2">figsize</span><span class="s3">=[</span><span class="s5">16</span><span class="s3">,</span><span class="s5">6</span><span class="s3">], </span><span class="s2">dpi</span><span class="s3">=</span><span class="s5">100</span><span class="s3">)</span>
<span class="s2">sns</span><span class="s3">.</span><span class="s2">barplot</span><span class="s3">(</span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfd</span><span class="s3">.</span><span class="s2">nlargest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;blue&quot;</span><span class="s3">)</span>

<span class="s2">fig</span><span class="s3">.</span><span class="s2">supylabel</span><span class="s3">(</span><span class="s4">&quot;Cantidad de publicaciones&quot;</span><span class="s3">, </span><span class="s2">x</span><span class="s3">=</span><span class="s5">0.06</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">supxlabel</span><span class="s3">(</span><span class="s4">&quot;Inmobiliarias o corredoras&quot;</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">suptitle</span><span class="s3">(</span><span class="s4">&quot;Inmobiliarias o corredoras con mayor numero de publicaciones&quot;</span><span class="s3">, </span><span class="s2">y</span><span class="s3">=</span><span class="s5">0.92</span><span class="s3">)</span>
<span class="s0">#%% md 
</span><span class="s2">Comunas con mayor y menor numero de publicaciones 
</span><span class="s0">#%% 
</span><span class="s2">sns</span><span class="s3">.</span><span class="s2">set</span><span class="s3">(</span><span class="s2">font_scale</span><span class="s3">=</span><span class="s5">0.7</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">, </span><span class="s2">axs </span><span class="s3">= </span><span class="s2">plt</span><span class="s3">.</span><span class="s2">subplots</span><span class="s3">(</span><span class="s2">nrows</span><span class="s3">=</span><span class="s5">2</span><span class="s3">, </span><span class="s2">figsize</span><span class="s3">=[</span><span class="s5">12</span><span class="s3">,</span><span class="s5">6</span><span class="s3">], </span><span class="s2">dpi</span><span class="s3">=</span><span class="s5">100</span><span class="s3">)</span>
<span class="s2">sns</span><span class="s3">.</span><span class="s2">barplot</span><span class="s3">(</span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfx</span><span class="s3">.</span><span class="s2">groupby</span><span class="s3">(</span><span class="s4">&quot;Comuna&quot;</span><span class="s3">)[</span><span class="s4">&quot;id&quot;</span><span class="s3">].</span><span class="s2">nunique</span><span class="s3">().</span><span class="s2">nlargest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;blue&quot;</span><span class="s3">, </span><span class="s2">ax</span><span class="s3">=</span><span class="s2">axs</span><span class="s3">[</span><span class="s5">0</span><span class="s3">])</span>
<span class="s2">sns</span><span class="s3">.</span><span class="s2">barplot</span><span class="s3">(</span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfx</span><span class="s3">.</span><span class="s2">groupby</span><span class="s3">(</span><span class="s4">&quot;Comuna&quot;</span><span class="s3">)[</span><span class="s4">&quot;id&quot;</span><span class="s3">].</span><span class="s2">nunique</span><span class="s3">().</span><span class="s2">nsmallest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">).</span><span class="s2">sort_values</span><span class="s3">(</span><span class="s2">ascending</span><span class="s3">=</span><span class="s1">False</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;red&quot;</span><span class="s3">, </span><span class="s2">ax</span><span class="s3">=</span><span class="s2">axs</span><span class="s3">[</span><span class="s5">1</span><span class="s3">])</span>

<span class="s2">axs</span><span class="s3">[</span><span class="s5">0</span><span class="s3">].</span><span class="s2">set</span><span class="s3">(</span><span class="s2">xlabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">, </span><span class="s2">ylabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">)</span>
<span class="s2">axs</span><span class="s3">[</span><span class="s5">1</span><span class="s3">].</span><span class="s2">set</span><span class="s3">(</span><span class="s2">xlabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">, </span><span class="s2">ylabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">supylabel</span><span class="s3">(</span><span class="s4">&quot;Publicaciones&quot;</span><span class="s3">, </span><span class="s2">x</span><span class="s3">=</span><span class="s5">0.06</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">supxlabel</span><span class="s3">(</span><span class="s4">&quot;Comuna&quot;</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">suptitle</span><span class="s3">(</span><span class="s4">&quot;Comunas con mayor y menor numero de publicaciones&quot;</span><span class="s3">, </span><span class="s2">y</span><span class="s3">=</span><span class="s5">0.92</span><span class="s3">)</span>
<span class="s0">#%% md 
</span><span class="s2">Valor promedio de una propiedad en X comuna 
</span><span class="s0">#%% 
</span><span class="s2">sns</span><span class="s3">.</span><span class="s2">set</span><span class="s3">(</span><span class="s2">font_scale</span><span class="s3">=</span><span class="s5">0.7</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">, </span><span class="s2">axs </span><span class="s3">= </span><span class="s2">plt</span><span class="s3">.</span><span class="s2">subplots</span><span class="s3">(</span><span class="s2">nrows</span><span class="s3">=</span><span class="s5">2</span><span class="s3">, </span><span class="s2">figsize</span><span class="s3">=[</span><span class="s5">12</span><span class="s3">,</span><span class="s5">6</span><span class="s3">], </span><span class="s2">dpi</span><span class="s3">=</span><span class="s5">100</span><span class="s3">)</span>
<span class="s2">sns</span><span class="s3">.</span><span class="s2">barplot</span><span class="s3">(</span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfp</span><span class="s3">.</span><span class="s2">nlargest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;blue&quot;</span><span class="s3">, </span><span class="s2">ax</span><span class="s3">=</span><span class="s2">axs</span><span class="s3">[</span><span class="s5">0</span><span class="s3">])</span>
<span class="s2">sns</span><span class="s3">.</span><span class="s2">barplot</span><span class="s3">(</span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfp</span><span class="s3">.</span><span class="s2">nsmallest</span><span class="s3">(</span><span class="s5">10</span><span class="s3">).</span><span class="s2">sort_values</span><span class="s3">(</span><span class="s2">ascending</span><span class="s3">=</span><span class="s1">False</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;red&quot;</span><span class="s3">, </span><span class="s2">ax</span><span class="s3">=</span><span class="s2">axs</span><span class="s3">[</span><span class="s5">1</span><span class="s3">])</span>

<span class="s2">axs</span><span class="s3">[</span><span class="s5">0</span><span class="s3">].</span><span class="s2">set</span><span class="s3">(</span><span class="s2">xlabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">, </span><span class="s2">ylabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">)</span>
<span class="s2">axs</span><span class="s3">[</span><span class="s5">1</span><span class="s3">].</span><span class="s2">set</span><span class="s3">(</span><span class="s2">xlabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">, </span><span class="s2">ylabel</span><span class="s3">=</span><span class="s1">None</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">supylabel</span><span class="s3">(</span><span class="s4">&quot;Precio en UF&quot;</span><span class="s3">, </span><span class="s2">x</span><span class="s3">=</span><span class="s5">0.06</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">supxlabel</span><span class="s3">(</span><span class="s4">&quot;Comuna&quot;</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">suptitle</span><span class="s3">(</span><span class="s4">&quot;Promedio de Precio en UF por Comuna&quot;</span><span class="s3">, </span><span class="s2">y</span><span class="s3">=</span><span class="s5">0.92</span><span class="s3">)</span>

<span class="s0">#%% md 
</span><span class="s2">Mapa de calor 
</span><span class="s0">#%% 
</span><span class="s2">corr </span><span class="s3">= </span><span class="s2">dfx</span><span class="s3">[[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">, </span><span class="s4">&quot;Dorms&quot;</span><span class="s3">, </span><span class="s4">&quot;Baths&quot;</span><span class="s3">, </span><span class="s4">&quot;Built Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">,</span><span class="s4">&quot;Parking&quot;</span><span class="s3">]].</span><span class="s2">corr</span><span class="s3">()</span>
<span class="s2">mask </span><span class="s3">= </span><span class="s2">np</span><span class="s3">.</span><span class="s2">triu</span><span class="s3">(</span><span class="s2">corr</span><span class="s3">)</span>
    
<span class="s2">fig</span><span class="s3">, </span><span class="s2">ax </span><span class="s3">= </span><span class="s2">plt</span><span class="s3">.</span><span class="s2">subplots</span><span class="s3">( </span><span class="s2">figsize</span><span class="s3">=(</span><span class="s5">10</span><span class="s3">,</span><span class="s5">8</span><span class="s3">) )</span>
<span class="s2">sns</span><span class="s3">.</span><span class="s2">heatmap</span><span class="s3">(</span><span class="s2">data</span><span class="s3">=</span><span class="s2">corr</span><span class="s3">, </span><span class="s2">mask</span><span class="s3">=</span><span class="s2">mask</span><span class="s3">, </span><span class="s2">annot</span><span class="s3">=</span><span class="s1">True</span><span class="s3">, </span><span class="s2">fmt</span><span class="s3">=</span><span class="s4">&quot;0.1f&quot;</span><span class="s3">, </span><span class="s2">vmin</span><span class="s3">=</span><span class="s4">&quot;-0.16&quot;</span><span class="s3">, </span><span class="s2">vmax</span><span class="s3">=</span><span class="s4">&quot;0.36&quot;</span><span class="s3">, </span><span class="s2">square</span><span class="s3">=</span><span class="s1">True</span><span class="s3">)</span>
<span class="s2">fig</span><span class="s3">.</span><span class="s2">savefig</span><span class="s3">(</span><span class="s4">'heatmap.png'</span><span class="s3">)</span>
<span class="s0">#%% md 
</span><span class="s2">Segun los resultados obtenidos anteriormente podemos graficar: 
Una regresión linear de &quot;Price_UF&quot; y &quot;Baths&quot; (Alta correlación, 0.6) 
Una regresión linear de &quot;Price_UF&quot; y &quot;Total Area&quot; (Baja correlación, 0.1) (Realizo el calculo solo por curiosidad) 
</span><span class="s0">#%% 
</span><span class="s2">X </span><span class="s3">= </span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">].</span><span class="s2">values</span><span class="s3">.</span><span class="s2">reshape</span><span class="s3">(-</span><span class="s5">1</span><span class="s3">, </span><span class="s5">1</span><span class="s3">)</span>
<span class="s2">y </span><span class="s3">= </span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">].</span><span class="s2">values</span>

<span class="s2">X_train</span><span class="s3">, </span><span class="s2">X_test</span><span class="s3">, </span><span class="s2">y_train</span><span class="s3">, </span><span class="s2">y_test </span><span class="s3">= </span><span class="s2">train_test_split</span><span class="s3">(</span><span class="s2">X</span><span class="s3">, </span><span class="s2">y</span><span class="s3">, </span><span class="s2">test_size</span><span class="s3">=</span><span class="s5">0.2</span><span class="s3">, </span><span class="s2">random_state</span><span class="s3">=</span><span class="s5">0</span><span class="s3">)</span>
<span class="s2">model </span><span class="s3">= </span><span class="s2">LinearRegression</span><span class="s3">()</span>

<span class="s0">#%% 
</span><span class="s2">model</span><span class="s3">.</span><span class="s2">fit</span><span class="s3">(</span><span class="s2">X_train</span><span class="s3">, </span><span class="s2">y_train</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">y_pred </span><span class="s3">= </span><span class="s2">model</span><span class="s3">.</span><span class="s2">predict</span><span class="s3">(</span><span class="s2">X_test</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">mse </span><span class="s3">= </span><span class="s2">mean_squared_error</span><span class="s3">(</span><span class="s2">y_test</span><span class="s3">, </span><span class="s2">y_pred</span><span class="s3">)</span>
<span class="s2">r2 </span><span class="s3">= </span><span class="s2">r2_score</span><span class="s3">(</span><span class="s2">y_test</span><span class="s3">, </span><span class="s2">y_pred</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">entrada </span><span class="s3">= [[</span><span class="s5">100000</span><span class="s3">],[</span><span class="s5">200000</span><span class="s3">],[</span><span class="s5">300000</span><span class="s3">],[</span><span class="s5">400000</span><span class="s3">]]</span>
<span class="s2">model</span><span class="s3">.</span><span class="s2">predict</span><span class="s3">(</span><span class="s2">entrada</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">print</span><span class="s3">(</span><span class="s4">&quot;Error cuadrático medio:&quot;</span><span class="s3">, </span><span class="s2">mse</span><span class="s3">)</span>
<span class="s2">print</span><span class="s3">(</span><span class="s4">&quot;Coeficiente de determinación:&quot;</span><span class="s3">, </span><span class="s2">r2</span><span class="s3">)</span>
<span class="s0">#%% 
</span><span class="s2">sns</span><span class="s3">.</span><span class="s2">lmplot</span><span class="s3">(</span><span class="s2">x</span><span class="s3">=</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">, </span><span class="s2">y</span><span class="s3">=</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">, </span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfx</span><span class="s3">, </span><span class="s2">ci</span><span class="s3">=</span><span class="s1">None</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">show</span><span class="s3">()</span>
<span class="s0">#%% 
</span><span class="s2">sns</span><span class="s3">.</span><span class="s2">lmplot</span><span class="s3">(</span><span class="s2">x</span><span class="s3">=</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">, </span><span class="s2">y</span><span class="s3">=</span><span class="s4">&quot;Baths&quot;</span><span class="s3">, </span><span class="s2">data</span><span class="s3">=</span><span class="s2">dfx</span><span class="s3">, </span><span class="s2">ci</span><span class="s3">=</span><span class="s1">None</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">show</span><span class="s3">()</span>
<span class="s0">#%% 
</span><span class="s2">plt</span><span class="s3">.</span><span class="s2">ylabel</span><span class="s3">(</span><span class="s4">&quot;Baths&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">xlabel</span><span class="s3">(</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">scatter</span><span class="s3">(</span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">], </span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Baths&quot;</span><span class="s3">], </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;blue&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">show</span>
<span class="s0">#%% 
</span><span class="s2">plt</span><span class="s3">.</span><span class="s2">scatter</span><span class="s3">(</span><span class="s2">entrada</span><span class="s3">, </span><span class="s2">model</span><span class="s3">.</span><span class="s2">predict</span><span class="s3">(</span><span class="s2">entrada</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;red&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">plot</span><span class="s3">(</span><span class="s2">entrada</span><span class="s3">, </span><span class="s2">model</span><span class="s3">.</span><span class="s2">predict</span><span class="s3">(</span><span class="s2">entrada</span><span class="s3">), </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;black&quot;</span><span class="s3">)</span>

<span class="s2">plt</span><span class="s3">.</span><span class="s2">ylabel</span><span class="s3">(</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">xlabel</span><span class="s3">(</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">scatter</span><span class="s3">(</span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Price_UF&quot;</span><span class="s3">], </span><span class="s2">dfx</span><span class="s3">[</span><span class="s4">&quot;Total Area&quot;</span><span class="s3">], </span><span class="s2">color</span><span class="s3">=</span><span class="s4">&quot;blue&quot;</span><span class="s3">)</span>
<span class="s2">plt</span><span class="s3">.</span><span class="s2">show</span>
<span class="s0">#%% 
</span></pre>
</body>
</html>